{% extends 'base.html' %}

{% block head %}
<title>Records</title>
{% endblock %}


{% block header %}
<a type="button" href="{{ url_for('index') }}" class="btn btn-primary">Home</a>
{% endblock %}


{% block body %}

<div class="container pt-2 px-3 pb-4">
    <h2 class="py-2 text-light">{{projectName|capitalize}}</h2>
    <div>
        <form action="" method="POST" name="add_skills" id="add_skills">
            <div class="table-responsive">
                <table class="table table-hover table-sm">
                    <tr class="table text-light row-cols-auto">
                        <th>Tag</th>
                        <th>Length</th>
                        <th>Width</th>
                        <th>Area | Sqm</th>
                        <th>Area | Sqft</th>
                        <th>Rate</th>
                        <th>Amount</th>
                        <th></th>
                    </tr>
                    {% set ns = namespace(count=0) %}
                    {% for item in project_json %}
                    <tr class="table text-light">
                        <td>{{item["name"]|capitalize}}</td>
                        <td>{{item["length"]}} m ({{'%0.2f' | format(item["length"]*3.281 | float) }} ft) </td>
                        <td>{{item["width"]}} m ({{'%0.2f' | format(item["width"]*3.281 | float) }} ft) </td>
                        {% if 'N/A' == item["sqm"] %}
                        <!-- if you change "N/A" here then change the value in js file also -->
                        <td>{{item["sqm"]}}</td>
                        <td>{{item["sqft"]}}</td>
                        {% else %}
                        <td>{{'%0.2f' | format(item["sqm"] | float) }}</td>
                        <td>{{'%0.2f' | format(item["sqft"] | float) }}</td>
                        {% endif %}
                        <td>{{item["rate"]}}</td>
                        <td>{{item["amount"]}}</td>
                        <td><a
                                href='{{url_for("delete",projectName = projectName, rowNumber=project_json[ns.count]["dimId"])}}'><img
                                    src="https://img.icons8.com/cotton/25/000000/delete-sign--v2.png" /></a></td>
                    </tr>
                    {% set ns.count = ns.count + 1%}
                    {% endfor %}

                    <tr>
                        <th><input class="form-control form-control-sm" id="name" name="name" type="text"
                                placeholder="Tag it" aria-label=".form-control-sm" required>
                        </th>
                        <th><input class="form-control form-control-sm" id="length" step=".01" name="length"
                                type="number" placeholder="Length (meter)" oninput="areas()"
                                aria-label=".form-control-sm" required>
                        </th>
                        <th><input class="form-control form-control-sm" id="width" step=".01" name="width" type="number"
                                placeholder="Width (meter)" oninput="areas()" aria-label=".form-control-sm">
                        </th>
                        <th><input class="form-control form-control-sm" id="sqm" name="sqm" type="text"
                                placeholder="Sqm" aria-label=".form-control-sm" readonly>
                        </th>
                        <th><input class="form-control form-control-sm" id="sqft" name="sqft" type="text"
                                placeholder="Sqft" aria-label=".form-control-sm" readonly>
                        </th>
                        <th><input class="form-control form-control-sm" id="rate" step=".01" name="rate" type="number"
                                placeholder="Rate" oninput="areas()" aria-label=".form-control-sm">
                        </th>
                        <th><input class="form-control form-control-sm" id="amount" name="amount" type="number"
                                placeholder="Amount" aria-label=".form-control-sm" readonly>
                        </th>
                        <td></td>
                    </tr>

                </table>
            </div>

            <div class="my-2" style="text-align:center">
                <button type="submit" class="btn btn-primary m-1"><img
                        src="https://img.icons8.com/ios-filled/25/000000/save--v1.png" /> Add Item</button>

                <a class="btn btn-success m-1" href='{{url_for("download_excel",projectName=projectName)}}'>
                    <img src="https://img.icons8.com/ios-glyphs/25/000000/ms-excel.png"> Save Excel</a>

                <a class="btn btn-danger m-1" href='{{url_for("download_pdf",projectName=projectName)}}' disabled>
                    <img src="https://img.icons8.com/material-rounded/25/000000/pdf.png"> Save pdf</a>

            </div>

            <div class="px-5">
                <div class="record_total_card mt-5">
                    <p class="card-body" style="text-align:center">
                        Total<b class="fs-5"> {{sum_sqm}} Sqm</b><br>
                        Total<b class="fs-5"> {{sum_sqft}} Sqft</b><br>
                        Total<b class="fs-5"> Rs. {{sum_amt}} </b>(Calculated using metrics in sqft.)
                    </p>

                </div>
            </div>

        </form>
    </div>
</div>

{% endblock %}