{% extends 'base.html' %}
{% load static %} {% load humanize %} {% load utility %}

{% block title %} - Dimensions{% endblock %}

{% block head %}

{% endblock %}

{% block header %}

Hi, {{user.username|capfirst}} ðŸ‘‹

{% endblock %}


{% block modal %}

{% endblock %}



{% block body %}
<div class="container-lg pb-4">

    <div class="text-light py-2 display-4">Dashboard</div>

    <div class="container-lg pb-4">
        <div class="text-light py-2 display-6">Dimension</div>


        {% if dimensions|length == 0 %}
        <!-- CONDITION IF THERE IS No PROJECTS -->
        <ul class="list-group">
            <li class="list-group-item">
                <div class="ms-2 me-auto text-dark text-center">
                    <span class="fw-bold">Nothing Here</span>
                </div>
            </li>
        </ul>
        {% endif %}


        {% if dimensions %}
        <ul class="list-group">
            {% for item in dimensions %}
            <li class="list-group-item">
                <div class="d-flex justify-content-between align-items-start">
                    <a href="{% url 'project_detail' item.id item.name %}">
                        <div class="ms-2 text-dark">
                            <div class="fw-bold">
                                <span>
                                    <span>{% replaceItem item.name|capfirst %}</span>
                                    <span class="badge bg-primary">{{item.created_on | naturalday}}</span>
                                </span>
                            </div>
                            {% if item.description %}
                            <div>
                                {{item.description|truncatechars:20|capfirst}}
                            </div>
                            {% endif %}
                        </div>
                        <span>
                            <a class="delete_button badge bg-light" id="delete_button{{item.id}}" data-bs-toggle="modal"
                                data-bs-target="#delete{{item.id}}Modal">
                                <img class="icon_ud" width="28" height="28"
                                    src="https://img.icons8.com/ios/50/000000/delete-forever--v2.png" />
                            </a>
                        </span>
                    </a>
                </div>
            </li>

            <!-- DELETE MODAL -->
            <div class="modal fade" id="delete{{item.id}}Modal" tabindex="-1"
                aria-labelledby="delete{{item.id}}ModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="delete{{item.id}}ModalLabel">
                                Confirm
                                delete "{{item.name | capfirst }}"</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body text-start">
                            You wish to permanently delete project&rarr;
                            <b>"{{item.name | capfirst }}"</b>?<br>
                            <b class="my-1">Be Careful!</b>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-success" data-bs-dismiss="modal">Get
                                back to safety</button>
                            <form action="{% url 'delete_project' item.id item.name %}" method="POST">
                                {% csrf_token %}

                                <button class="confirm_delete btn btn-danger align-bottom" type="submit">
                                    Chop Chop!
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- DELETE MODAL -->
            {% endfor %}
        </ul>
        {% endif %}

    </div>


    <div class="container-lg pb-4">

        <div class="text-light py-2 display-6">Estimate</div>

        {% if estimates|length == 0 %}
        <!-- CONDITION IF THERE IS No PROJECTS -->
        <ul class="list-group">
            <li class="list-group-item">
                <div class="ms-2 me-auto text-dark text-center">
                    <span class="fw-bold">Nothing Here</span>
                </div>
            </li>
        </ul>
        {% endif %}

        {% if estimates %}
        <ul class="list-group">
            {% for item in estimates %}
            <li class="list-group-item">
                <div class="d-flex justify-content-between align-items-start">
                    <a href="{% url 'estimate' item.id item.name %}">
                        <div class="ms-2 me-auto text-dark">
                            <div class="">
                                <span class="fw-bold">
                                    <span class="text-muted">
                                        {{item.reference_number}}
                                    </span>
                                    <span>
                                        <span>{% replaceItem item.name|capfirst %}</span>
                                        <span class="badge bg-primary">{{item.created_on|naturalday}}</span>
                                    </span>
                                </span>
                            </div>
                            <span class="wrapword">
                                {{item.description|truncatechars:20|capfirst}}
                            </span>
                        </div>
                        <span>
                            <a class="delete_button badge bg-light" id="delete_estimate_button{{item.id}}"
                                data-bs-toggle="modal" data-bs-target="#delete_estimate_button{{item.id}}Modal">
                                <img class="icon_ud" width="28" height="28"
                                    src="https://img.icons8.com/ios/50/000000/delete-forever--v2.png" />
                            </a>
                        </span>
                    </a>
                </div>
            </li>
            <!-- DELETE ESTIMATE PROJECT MODAL -->
            <div class="modal fade" id="delete_estimate_button{{item.id}}Modal" tabindex="-1"
                aria-labelledby="delete_estimate_button{{item.id}}ModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="delete_estimate_button{{item.id}}ModalLabel">
                                Confirm
                                delete "{% replaceItem item.name|capfirst %}"</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body text-start">
                            You wish to permanently delete estimate ::&rarr;
                            <b>"{% replaceItem item.name|capfirst %}"</b>?<br>
                            <b class="my-1">Be Careful!</b>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-success" data-bs-dismiss="modal">Get
                                back to safety</button>
                            <form action="{% url 'delete_estimate' item.id item.name %}" method="POST">
                                {% csrf_token %}

                                <button class="confirm_delete btn btn-danger align-bottom" type="submit">
                                    Chop Chop!
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- DELETE ESTIMATE PROJECT MODAL -->
            {% endfor %}
        </ul>
        {% endif %}

    </div>
</div>





{% endblock %}

{% block expense_button %}

<a aria-label="all-expenses" href="{% url 'all_expenses' %}" type="button" class="btn btn-success btn-lg">
    <img alt="all-expenses" src="https://img.icons8.com/ios/30/ffffff/money-circulation.png" />
</a>

<a aria-label="all-expenses" href="{% url 'all_estimates' %}" type="button" class="btn btn-info btn-lg">
    <img src="https://img.icons8.com/ios/30/000000/estimates.png" />
</a>
{% endblock %}